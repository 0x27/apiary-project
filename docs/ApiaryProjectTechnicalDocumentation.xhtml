<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Apiary Project Technical Documentation</title><meta name="generator" content="DocBook XSL-NS Stylesheets V1.76.1"/></head><body><div class="book" title="Apiary Project Technical Documentation"><div class="titlepage"><div><div><h1 class="title"><a id="d0e2"/>Apiary Project Technical Documentation</h1></div><div><div class="author"><h3 class="author"><span class="orgname"> The <a class="link" href="http://www.txcdk.unt.edu" target="_top">Texas Center for Digital
                    Knowledge</a> (TxCDK) at the University of North Texas and the <a class="link" href="http://www.brit.org" target="_top">Botanical Research Institute of Texas</a>
                (BRIT) </span><code class="email">&lt;<a class="email" href="mailto:smurphy@brit.org">smurphy@brit.org</a>&gt;</code></h3><code class="email">&lt;<a class="email" href="mailto:smurphy@brit.org">smurphy@brit.org</a>&gt;</code></div></div></div><hr/></div><div class="toc"><p><strong>Table of Contents</strong></p><dl><dt><span class="preface"><a href="#d0e17">Introduction</a></span></dt><dd><dl><dt><span class="section"><a href="#d0e20">What is the Apiary Project?</a></span></dt></dl></dd><dt><span class="chapter"><a href="#d0e25">1. 
            <span class="bold"><strong>Hardware and Software Requirements</strong></span>
        </a></span></dt><dd><dl><dt><span class="sect1"><a href="#d0e33"> Apiary Project Workflow and Image Server </a></span></dt><dd><dl><dt><span class="sect2"><a href="#d0e36"> Hardware</a></span></dt><dt><span class="sect2"><a href="#d0e49"> Software</a></span></dt></dl></dd><dt><span class="sect1"><a href="#d0e164"> Apiary Project Image Processing and Conversion Server </a></span></dt><dd><dl><dt><span class="sect2"><a href="#d0e167"> Hardware</a></span></dt><dt><span class="sect2"><a href="#d0e180"> Software</a></span></dt></dl></dd></dl></dd><dt><span class="chapter"><a href="#d0e232">2. Installation and configuration documentation</a></span></dt><dd><dl><dt><span class="sect1"><a href="#d0e237">Install Ubuntu Desktop
                    10.04</a></span></dt><dt><span class="sect1"><a href="#d0e256">Go to Synaptics and install</a></span></dt><dt><span class="sect1"><a href="#d0e324">Configure server hostname</a></span></dt><dt><span class="sect1"><a href="#d0e332">Enable Apache Modules</a></span></dt><dt><span class="sect1"><a href="#d0e344">Configure PHP</a></span></dt><dt><span class="sect1"><a href="#d0e355">Create Mysql Drupal and Fedora users and databases</a></span></dt><dd><dl><dt><span class="sect2"><a href="#d0e363">Create Drupal user and database</a></span></dt><dt><span class="sect2"><a href="#d0e375">Create Fedora user and database</a></span></dt><dt><span class="sect2"><a href="#d0e387">Leave MySQL</a></span></dt></dl></dd><dt><span class="sect1"><a href="#d0e393">Install Drupal</a></span></dt><dd><dl><dt><span class="sect2"><a href="#d0e398">Download</a></span></dt><dt><span class="sect2"><a href="#d0e404">Extract drupal-6.22</a></span></dt><dt><span class="sect2"><a href="#d0e410">Move drupal-6.22 to /var/www/</a></span></dt><dt><span class="sect2"><a href="#d0e416">Create symbolic link to drupal dir<em><span class="remark">Note: This preserves versioning as
                        drupal updates are released</span></em></a></span></dt><dt><span class="sect2"><a href="#d0e424">Edit Drupal .htaccess</a></span></dt><dt><span class="sect2"><a href="#d0e432">Create writeable Drupal files directory outside the scope of the main
                    .htaccess</a></span></dt><dt><span class="sect2"><a href="#d0e446">Edit Apache2 sites</a></span></dt><dt><span class="sect2"><a href="#d0e454">Create writeable settings file for Drupal install</a></span></dt><dt><span class="sect2"><a href="#d0e463">Install Drupal via web browser</a></span></dt><dt><span class="sect2"><a href="#d0e517">Remove write permission on settings file</a></span></dt></dl></dd><dt><span class="sect1"><a href="#d0e523">Setup Environment Variables</a></span></dt><dd><dl><dt><span class="sect2"><a href="#d0e526">Locate java home directory</a></span></dt><dt><span class="sect2"><a href="#d0e532">Create symbolic link for java-home<em><span class="remark">Note: This preserves
                        versioning</span></em></a></span></dt><dt><span class="sect2"><a href="#d0e540">Edit user profile</a></span></dt><dt><span class="sect2"><a href="#d0e564">Restart machine</a></span></dt></dl></dd><dt><span class="sect1"><a href="#d0e567">Install Fedora</a></span></dt><dd><dl><dt><span class="sect2"><a href="#d0e572">Download</a></span></dt><dt><span class="sect2"><a href="#d0e578">Create symbolic link to fedora dir<em><span class="remark">Note: This preserves
                        versioning</span></em></a></span></dt><dt><span class="sect2"><a href="#d0e586">Create a keystore for SSL support</a></span></dt><dt><span class="sect2"><a href="#d0e594">Run Fedora java installer</a></span></dt><dt><span class="sect2"><a href="#d0e681">Verify Fedora’s Resource Index activation<em><span class="remark">Note: Some Ubuntu installs
                        had this variable set to zero even using “Enable Resource Index:
                        true”</span></em></a></span></dt><dt><span class="sect2"><a href="#d0e691">Startup Tomcat (which will install Tomcat Fedora features)</a></span></dt><dt><span class="sect2"><a href="#d0e697">Shutdown Tomcat</a></span></dt><dt><span class="sect2"><a href="#d0e703">Copy crossdomain file</a></span></dt><dt><span class="sect2"><a href="#d0e709">Setup anonymous user access<em><span class="remark">Note: Allows anonymous users to be able to
                        view public objects later while using Islandora.</span></em></a></span></dt><dt><span class="sect2"><a href="#d0e731">Install Islandora Drupal filter</a></span></dt><dt><span class="sect2"><a href="#d0e804">Enable and rebuild Fedora’s Resource Index</a></span></dt></dl></dd><dt><span class="sect1"><a href="#d0e836">Install Adore-Djatoka
                    Image Server</a></span></dt><dd><dl><dt><span class="sect2"><a href="#d0e841">Download</a></span></dt><dt><span class="sect2"><a href="#d0e847">Extract adore-djatoka-1.1</a></span></dt><dt><span class="sect2"><a href="#d0e853">Move adore-djatoka-1.1 to /usr/local</a></span></dt><dt><span class="sect2"><a href="#d0e859">Create symbolic link to adore-djatoka dir<em><span class="remark">Note: This preserves
                        versioning</span></em></a></span></dt><dt><span class="sect2"><a href="#d0e867">Test functionality</a></span></dt><dt><span class="sect2"><a href="#d0e888">Add Adore-Djatoka to tomcat webapps</a></span></dt><dt><span class="sect2"><a href="#d0e914">Configure Referent Resolver</a></span></dt></dl></dd><dt><span class="sect1"><a href="#d0e977">Install OCRopus</a></span></dt><dd><dl><dt><span class="sect2"><a href="#d0e982">Download</a></span></dt><dt><span class="sect2"><a href="#d0e997">Install prerequisites</a></span></dt><dt><span class="sect2"><a href="#d0e1003">Install iulib library</a></span></dt><dt><span class="sect2"><a href="#d0e1015">Install OCRopus library</a></span></dt><dt><span class="sect2"><a href="#d0e1027">Configure Ubuntu for OCRopus</a></span></dt><dt><span class="sect2"><a href="#d0e1045">Test install</a></span></dt></dl></dd><dt><span class="sect1"><a href="#d0e1053">Install Ocrad</a></span></dt><dd><dl><dt><span class="sect2"><a href="#d0e1058">Download</a></span></dt><dt><span class="sect2"><a href="#d0e1070">Extract ocrad-0.21</a></span></dt><dt><span class="sect2"><a href="#d0e1076">Configure and make ocrad</a></span></dt></dl></dd><dt><span class="sect1"><a href="#d0e1093">Install GOCR</a></span></dt><dd><dl><dt><span class="sect2"><a href="#d0e1098">Download</a></span></dt><dt><span class="sect2"><a href="#d0e1110">Extract ocrad-0.21</a></span></dt><dt><span class="sect2"><a href="#d0e1116">Configure and make ocrad</a></span></dt></dl></dd></dl></dd></dl></div><div class="preface" title="Introduction"><div class="titlepage"><div><div><h2 class="title"><a id="d0e17"/>Introduction</h2></div></div></div><div class="toc"><p><strong>Table of Contents</strong></p><dl><dt><span class="section"><a href="#d0e20">What is the Apiary Project?</a></span></dt></dl></div><div class="section" title="What is the Apiary Project?"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="d0e20"/>What is the Apiary Project?</h2></div></div></div><p>The Apiary Project is a fundamental research project with the goal of identifying
                how human intelligence can be combined with machine processes for effective and
                efficient transformation of textual museum specimen label information into
                high-quality machine-processible parsed data. </p></div></div><div class="chapter" title="Chapter 1.  Hardware and Software Requirements"><div class="titlepage"><div><div><h2 class="title"><a id="d0e25"/>Chapter 1. 
            <span class="bold"><strong>Hardware and Software Requirements</strong></span>
        </h2></div><div><h3 class="subtitle"><em> Servers, OS requirements, software components and dependencies</em></h3></div></div></div><div class="toc"><p><strong>Table of Contents</strong></p><dl><dt><span class="sect1"><a href="#d0e33"> Apiary Project Workflow and Image Server </a></span></dt><dd><dl><dt><span class="sect2"><a href="#d0e36"> Hardware</a></span></dt><dt><span class="sect2"><a href="#d0e49"> Software</a></span></dt></dl></dd><dt><span class="sect1"><a href="#d0e164"> Apiary Project Image Processing and Conversion Server </a></span></dt><dd><dl><dt><span class="sect2"><a href="#d0e167"> Hardware</a></span></dt><dt><span class="sect2"><a href="#d0e180"> Software</a></span></dt></dl></dd></dl></div><div class="sect1" title="Apiary Project Workflow and Image Server"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="d0e33"/> Apiary Project Workflow and Image Server </h2></div></div></div><div class="sect2" title="Hardware"><div class="titlepage"><div><div><h3 class="title"><a id="d0e36"/> Hardware</h3></div></div></div><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p>Dual to Quad core 64 bit processor</p></li><li class="listitem"><p>4-16GB RAM</p></li><li class="listitem"><p>Sizeable storage space, we used a 100GB drive for original images and
                            another 100GB for converted images</p></li></ol></div></div><div class="sect2" title="Software"><div class="titlepage"><div><div><h3 class="title"><a id="d0e49"/> Software</h3></div></div></div><div class="sect3" title="Operating System"><div class="titlepage"><div><div><h4 class="title"><a id="d0e52"/> Operating System</h4></div></div></div><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p>Ubuntu 8.04 64-bit or later, primarily 10.04 Desktop</p></li></ol></div></div><div class="sect3" title="Ubuntu aptitude packages"><div class="titlepage"><div><div><h4 class="title"><a id="d0e59"/> Ubuntu aptitude packages</h4></div></div></div><div class="sect4" title="Applications"><div class="titlepage"><div><div><h5 class="title"><a id="d0e62"/>Applications</h5></div></div></div><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p>Apache 2</p></li><li class="listitem"><p>Mysql-server</p></li><li class="listitem"><p>PHP 5</p></li><li class="listitem"><p>Sun-java6-jdk</p></li><li class="listitem"><p>Subversion</p></li><li class="listitem"><p>curl</p></li><li class="listitem"><p>mercurial</p></li><li class="listitem"><p>scons</p></li><li class="listitem"><p>chkconfig</p></li><li class="listitem"><p>vim-nox</p></li><li class="listitem"><p>flashplugin-installer</p></li><li class="listitem"><p>varnish (*optional)</p></li></ol></div></div><div class="sect4" title="Libraries"><div class="titlepage"><div><div><h5 class="title"><a id="d0e102"/>Libraries</h5></div></div></div><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p>libapache2-mod-auth-mysql</p></li><li class="listitem"><p>Php5-mysql</p></li><li class="listitem"><p>Php5-curl</p></li><li class="listitem"><p>Php5-xsl</p></li><li class="listitem"><p>Php5-imagick</p></li><li class="listitem"><p>Php5-gd</p></li><li class="listitem"><p>Php5-dev</p></li><li class="listitem"><p>Php-soap</p></li><li class="listitem"><p>libjpeg-progs</p></li></ol></div></div></div><div class="sect3" title="Additional required applications"><div class="titlepage"><div><div><h4 class="title"><a id="d0e133"/> Additional required applications</h4></div></div></div><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p>Fedora-commons digital repository 3.2</p></li><li class="listitem"><p>Tomcat 5.5</p></li><li class="listitem"><p>Adore-Djatoka JPEG2000 Image Server</p></li><li class="listitem"><p>Apache-SOLR 1.4.1</p></li><li class="listitem"><p>Drupal content management 6.22</p></li><li class="listitem"><p>Islandora (fedora repository Drupal module)</p></li><li class="listitem"><p>OCRopus 0.4.1</p></li><li class="listitem"><p>GOCR</p></li><li class="listitem"><p>Ocrad </p></li></ol></div></div></div></div><div class="sect1" title="Apiary Project Image Processing and Conversion Server"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="d0e164"/> Apiary Project Image Processing and Conversion Server </h2></div></div></div><div class="sect2" title="Hardware"><div class="titlepage"><div><div><h3 class="title"><a id="d0e167"/> Hardware</h3></div></div></div><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p>Dual to Quad core 64 bit processor</p></li><li class="listitem"><p>4+GB RAM</p></li><li class="listitem"><p>Sizeable storage space. Note: We connected to the shared image drives
                            from the Apiary Project Server.</p></li></ol></div></div><div class="sect2" title="Software"><div class="titlepage"><div><div><h3 class="title"><a id="d0e180"/> Software</h3></div></div></div><div class="sect3" title="Operating System"><div class="titlepage"><div><div><h4 class="title"><a id="d0e183"/> Operating System</h4></div></div></div><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p>Ubuntu 10.04 64-bit server</p></li></ol></div></div><div class="sect3" title="Ubuntu aptitude packages"><div class="titlepage"><div><div><h4 class="title"><a id="d0e190"/> Ubuntu aptitude packages</h4></div></div></div><div class="sect4" title="Applications"><div class="titlepage"><div><div><h5 class="title"><a id="d0e193"/>Applications</h5></div></div></div><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p>ImageMagick</p></li><li class="listitem"><p>OpenJPEG</p></li></ol></div></div><div class="sect4" title="Libraries"><div class="titlepage"><div><div><h5 class="title"><a id="d0e203"/>Libraries</h5></div></div></div><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p>build-essential</p></li><li class="listitem"><p>libpng12-dev</p></li><li class="listitem"><p>libjpeg62-dev</p></li><li class="listitem"><p>libtiff4-dev</p></li><li class="listitem"><p>libjpeg-progs</p></li><li class="listitem"><p>libopenjpeg-dev</p></li></ol></div></div></div><div class="sect3" title="Additional required applications"><div class="titlepage"><div><div><h4 class="title"><a id="d0e225"/> Additional required applications</h4></div></div></div><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p>OpenJPEG version 1.4 sources</p></li></ol></div></div></div></div></div><div class="chapter" title="Chapter 2. Installation and configuration documentation"><div class="titlepage"><div><div><h2 class="title"><a id="d0e232"/>Chapter 2. Installation and configuration documentation</h2></div><div><h3 class="subtitle"><em>A step by step guide to completly installing the Apiary Project
            workflow</em></h3></div></div></div><div class="toc"><p><strong>Table of Contents</strong></p><dl><dt><span class="sect1"><a href="#d0e237">Install Ubuntu Desktop
                    10.04</a></span></dt><dt><span class="sect1"><a href="#d0e256">Go to Synaptics and install</a></span></dt><dt><span class="sect1"><a href="#d0e324">Configure server hostname</a></span></dt><dt><span class="sect1"><a href="#d0e332">Enable Apache Modules</a></span></dt><dt><span class="sect1"><a href="#d0e344">Configure PHP</a></span></dt><dt><span class="sect1"><a href="#d0e355">Create Mysql Drupal and Fedora users and databases</a></span></dt><dd><dl><dt><span class="sect2"><a href="#d0e363">Create Drupal user and database</a></span></dt><dt><span class="sect2"><a href="#d0e375">Create Fedora user and database</a></span></dt><dt><span class="sect2"><a href="#d0e387">Leave MySQL</a></span></dt></dl></dd><dt><span class="sect1"><a href="#d0e393">Install Drupal</a></span></dt><dd><dl><dt><span class="sect2"><a href="#d0e398">Download</a></span></dt><dt><span class="sect2"><a href="#d0e404">Extract drupal-6.22</a></span></dt><dt><span class="sect2"><a href="#d0e410">Move drupal-6.22 to /var/www/</a></span></dt><dt><span class="sect2"><a href="#d0e416">Create symbolic link to drupal dir<em><span class="remark">Note: This preserves versioning as
                        drupal updates are released</span></em></a></span></dt><dt><span class="sect2"><a href="#d0e424">Edit Drupal .htaccess</a></span></dt><dt><span class="sect2"><a href="#d0e432">Create writeable Drupal files directory outside the scope of the main
                    .htaccess</a></span></dt><dt><span class="sect2"><a href="#d0e446">Edit Apache2 sites</a></span></dt><dt><span class="sect2"><a href="#d0e454">Create writeable settings file for Drupal install</a></span></dt><dt><span class="sect2"><a href="#d0e463">Install Drupal via web browser</a></span></dt><dt><span class="sect2"><a href="#d0e517">Remove write permission on settings file</a></span></dt></dl></dd><dt><span class="sect1"><a href="#d0e523">Setup Environment Variables</a></span></dt><dd><dl><dt><span class="sect2"><a href="#d0e526">Locate java home directory</a></span></dt><dt><span class="sect2"><a href="#d0e532">Create symbolic link for java-home<em><span class="remark">Note: This preserves
                        versioning</span></em></a></span></dt><dt><span class="sect2"><a href="#d0e540">Edit user profile</a></span></dt><dt><span class="sect2"><a href="#d0e564">Restart machine</a></span></dt></dl></dd><dt><span class="sect1"><a href="#d0e567">Install Fedora</a></span></dt><dd><dl><dt><span class="sect2"><a href="#d0e572">Download</a></span></dt><dt><span class="sect2"><a href="#d0e578">Create symbolic link to fedora dir<em><span class="remark">Note: This preserves
                        versioning</span></em></a></span></dt><dt><span class="sect2"><a href="#d0e586">Create a keystore for SSL support</a></span></dt><dt><span class="sect2"><a href="#d0e594">Run Fedora java installer</a></span></dt><dt><span class="sect2"><a href="#d0e681">Verify Fedora’s Resource Index activation<em><span class="remark">Note: Some Ubuntu installs
                        had this variable set to zero even using “Enable Resource Index:
                        true”</span></em></a></span></dt><dt><span class="sect2"><a href="#d0e691">Startup Tomcat (which will install Tomcat Fedora features)</a></span></dt><dt><span class="sect2"><a href="#d0e697">Shutdown Tomcat</a></span></dt><dt><span class="sect2"><a href="#d0e703">Copy crossdomain file</a></span></dt><dt><span class="sect2"><a href="#d0e709">Setup anonymous user access<em><span class="remark">Note: Allows anonymous users to be able to
                        view public objects later while using Islandora.</span></em></a></span></dt><dt><span class="sect2"><a href="#d0e731">Install Islandora Drupal filter</a></span></dt><dt><span class="sect2"><a href="#d0e804">Enable and rebuild Fedora’s Resource Index</a></span></dt></dl></dd><dt><span class="sect1"><a href="#d0e836">Install Adore-Djatoka
                    Image Server</a></span></dt><dd><dl><dt><span class="sect2"><a href="#d0e841">Download</a></span></dt><dt><span class="sect2"><a href="#d0e847">Extract adore-djatoka-1.1</a></span></dt><dt><span class="sect2"><a href="#d0e853">Move adore-djatoka-1.1 to /usr/local</a></span></dt><dt><span class="sect2"><a href="#d0e859">Create symbolic link to adore-djatoka dir<em><span class="remark">Note: This preserves
                        versioning</span></em></a></span></dt><dt><span class="sect2"><a href="#d0e867">Test functionality</a></span></dt><dt><span class="sect2"><a href="#d0e888">Add Adore-Djatoka to tomcat webapps</a></span></dt><dt><span class="sect2"><a href="#d0e914">Configure Referent Resolver</a></span></dt></dl></dd><dt><span class="sect1"><a href="#d0e977">Install OCRopus</a></span></dt><dd><dl><dt><span class="sect2"><a href="#d0e982">Download</a></span></dt><dt><span class="sect2"><a href="#d0e997">Install prerequisites</a></span></dt><dt><span class="sect2"><a href="#d0e1003">Install iulib library</a></span></dt><dt><span class="sect2"><a href="#d0e1015">Install OCRopus library</a></span></dt><dt><span class="sect2"><a href="#d0e1027">Configure Ubuntu for OCRopus</a></span></dt><dt><span class="sect2"><a href="#d0e1045">Test install</a></span></dt></dl></dd><dt><span class="sect1"><a href="#d0e1053">Install Ocrad</a></span></dt><dd><dl><dt><span class="sect2"><a href="#d0e1058">Download</a></span></dt><dt><span class="sect2"><a href="#d0e1070">Extract ocrad-0.21</a></span></dt><dt><span class="sect2"><a href="#d0e1076">Configure and make ocrad</a></span></dt></dl></dd><dt><span class="sect1"><a href="#d0e1093">Install GOCR</a></span></dt><dd><dl><dt><span class="sect2"><a href="#d0e1098">Download</a></span></dt><dt><span class="sect2"><a href="#d0e1110">Extract ocrad-0.21</a></span></dt><dt><span class="sect2"><a href="#d0e1116">Configure and make ocrad</a></span></dt></dl></dd></dl></div><div class="sect1" title="Install Ubuntu Desktop 10.04"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="d0e237"/>Install <a class="link" href="http://releases.ubuntu.com/lucid/" target="_top">Ubuntu Desktop
                    10.04</a></h2></div><div><h3 class="subtitle">Note: The installation of the OS is outside the scope of this documentation,
                it is listed here to note the starting point of the installation</h3></div></div></div><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p>username: apiary</p></li><li class="listitem"><p>full name: password is apiary</p></li><li class="listitem"><p>password: apiary</p><p>Note: These documents will assume all passwords to be 'apiary'</p></li></ol></div></div><div class="sect1" title="Go to Synaptics and install"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="d0e256"/>Go to Synaptics and install</h2></div><div><h3 class="subtitle">Note: These can also be installed using aptitude from the command, i.e.
                apt-get install {package}</h3></div></div></div><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p>Apache 2 (and it’s automatically added required packages)</p></li><li class="listitem"><p>Mysql-server</p><p>Note: These documents assume the root password is apiary</p></li><li class="listitem"><p>PHP 5 (and it’s automatically added required packages)</p></li><li class="listitem"><p>Sun-java6-jdk (and it’s automatically added required packages)</p></li><li class="listitem"><p>Subversion</p></li><li class="listitem"><p>curl</p></li><li class="listitem"><p>mercurial</p></li><li class="listitem"><p>scons</p></li><li class="listitem"><p>chkconfig</p></li><li class="listitem"><p>libapache2-mod-auth-mysql</p></li><li class="listitem"><p>flashplugin-installer</p></li><li class="listitem"><p>Php5-mysql</p></li><li class="listitem"><p>Php5-curl</p></li><li class="listitem"><p>Php5-xsl</p></li><li class="listitem"><p>Php5-imagick</p></li><li class="listitem"><p>Php5-gd</p></li><li class="listitem"><p>Php5-dev</p></li><li class="listitem"><p>Php-soap</p></li><li class="listitem"><p>libjpeg-progs</p></li><li class="listitem"><p>vim-nox (this fixes the weird behavior vi has with Ubuntu)</p></li></ol></div></div><div class="sect1" title="Configure server hostname"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="d0e324"/>Configure server hostname</h2></div></div></div><div class="cmdsynopsis"><p><code class="command">vi /etc/hostname<em><span class="remark">change hostname</span></em></code> </p></div></div><div class="sect1" title="Enable Apache Modules"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="d0e332"/>Enable Apache Modules</h2></div></div></div><div class="cmdsynopsis"><p><code class="command">a2enmod rewrite</code> </p></div><div class="cmdsynopsis"><p><code class="command">a2enmod auth_mysqlvi</code> </p></div><div class="cmdsynopsis"><p><code class="command">/etc/init.d/apache2 restart</code> </p></div></div><div class="sect1" title="Configure PHP"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="d0e344"/>Configure PHP</h2></div></div></div><div class="cmdsynopsis"><p><code class="command">vi /etc/php5/apache2/php.ini<em><span class="remark">Replace ‘memory_limit = 16M’ with
                        ‘memory_limit = 256M’</span></em></code> </p></div><div class="cmdsynopsis"><p><code class="command">/etc/init.d/apache2 restart</code> </p></div></div><div class="sect1" title="Create Mysql Drupal and Fedora users and databases"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="d0e355"/>Create Mysql Drupal and Fedora users and databases</h2></div></div></div><div class="cmdsynopsis"><p><code class="command">mysql -u root -p<em><span class="remark">Accesses mysql command line, password is
                        apiary</span></em></code> </p></div><div class="sect2" title="Create Drupal user and database"><div class="titlepage"><div><div><h3 class="title"><a id="d0e363"/>Create Drupal user and database</h3></div></div></div><div class="cmdsynopsis"><p><code class="command">create database drupal;</code> </p></div><div class="cmdsynopsis"><p><code class="command">grant all on drupal.* to ‘drupalAdmin’@’localhost’ identified by
                        ‘apiary’;</code> </p></div><div class="cmdsynopsis"><p><code class="command">grant all on drupal.* to ‘drupalAdmin’@’%’ identified by
                        ‘apiary’;</code> </p></div></div><div class="sect2" title="Create Fedora user and database"><div class="titlepage"><div><div><h3 class="title"><a id="d0e375"/>Create Fedora user and database</h3></div></div></div><div class="cmdsynopsis"><p><code class="command">create database fedora;</code> </p></div><div class="cmdsynopsis"><p><code class="command">grant all on drupal.* to ‘drupalAdmin’@’localhost’ identified by
                        ‘apiary’;</code> </p></div><div class="cmdsynopsis"><p><code class="command">grant all on drupal.* to ‘drupalAdmin’@’%’ identified by
                        ‘apiary’;</code> </p></div></div><div class="sect2" title="Leave MySQL"><div class="titlepage"><div><div><h3 class="title"><a id="d0e387"/>Leave MySQL</h3></div></div></div><div class="cmdsynopsis"><p><code class="command">exit;</code> </p></div></div></div><div class="sect1" title="Install Drupal"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="d0e393"/>Install <a class="link" href="http://drupal.org/project/drupal" target="_top">Drupal</a></h2></div></div></div><div class="sect2" title="Download"><div class="titlepage"><div><div><h3 class="title"><a id="d0e398"/>Download</h3></div></div></div><div class="cmdsynopsis"><p><code class="command">wget http://ftp.drupal.org/files/projects/drupal-6.22.tar.gz</code> </p></div></div><div class="sect2" title="Extract drupal-6.22"><div class="titlepage"><div><div><h3 class="title"><a id="d0e404"/>Extract drupal-6.22</h3></div></div></div><div class="cmdsynopsis"><p><code class="command">tar -zxvf drupal-6.22.tar.gz</code> </p></div></div><div class="sect2" title="Move drupal-6.22 to /var/www/"><div class="titlepage"><div><div><h3 class="title"><a id="d0e410"/>Move drupal-6.22 to /var/www/</h3></div></div></div><div class="cmdsynopsis"><p><code class="command">mv drupal-6.22.tar.gz /var/www</code> </p></div></div><div class="sect2" title="Create symbolic link to drupal dirNote: This preserves versioning as drupal updates are released"><div class="titlepage"><div><div><h3 class="title"><a id="d0e416"/>Create symbolic link to drupal dir<em><span class="remark">Note: This preserves versioning as
                        drupal updates are released</span></em></h3></div></div></div><div class="cmdsynopsis"><p><code class="command">ln -s /var/www/drupal-6.22 /var/www/drupal</code> </p></div></div><div class="sect2" title="Edit Drupal .htaccess"><div class="titlepage"><div><div><h3 class="title"><a id="d0e424"/>Edit Drupal .htaccess</h3></div></div></div><div class="cmdsynopsis"><p><code class="command">vi /var/www/drupal/.htaccess <em><span class="remark">uncomment REWRITEs for ‘/drupal’
                        </span></em></code> </p></div></div><div class="sect2" title="Create writeable Drupal files directory outside the scope of the main .htaccess"><div class="titlepage"><div><div><h3 class="title"><a id="d0e432"/>Create writeable Drupal files directory outside the scope of the main
                    .htaccess</h3></div></div></div><div class="cmdsynopsis"><p><code class="command">mkdir /var/www/drupal/sites/default/files</code> </p></div><div class="cmdsynopsis"><p><code class="command">chmod a+w /var/www/drupal/sites/default/files</code> </p></div><div class="cmdsynopsis"><p><code class="command">vi /var/www/drupal/sites/default/files/.htaccess<em><span class="remark">Save blank
                            file!</span></em></code> </p></div></div><div class="sect2" title="Edit Apache2 sites"><div class="titlepage"><div><div><h3 class="title"><a id="d0e446"/>Edit Apache2 sites</h3></div></div></div><div class="cmdsynopsis"><p><code class="command">vi /etc/apache2/sites-enabled/000-default <em><span class="remark">change AllowOverride
                            None to AllowOverride All for / and /var/www
                        directories</span></em></code> </p></div></div><div class="sect2" title="Create writeable settings file for Drupal install"><div class="titlepage"><div><div><h3 class="title"><a id="d0e454"/>Create writeable settings file for Drupal install</h3></div></div></div><div class="cmdsynopsis"><p><code class="command">cp /var/www/drupal/sites/default/default.settings.php
                        /var/www/drupal/sites/default/settings.php</code> </p></div><div class="cmdsynopsis"><p><code class="command">chmod a+w /var/www/drupal/sites/default/settings.php</code> </p></div></div><div class="sect2" title="Install Drupal via web browser"><div class="titlepage"><div><div><h3 class="title"><a id="d0e463"/>Install Drupal via web browser</h3></div></div></div><div class="sect3" title="Go to http://hostname/drupal"><div class="titlepage"><div><div><h4 class="title"><a id="d0e466"/>Go to http://hostname/drupal</h4></div></div></div></div><div class="sect3" title="Click Install Drupal in English"><div class="titlepage"><div><div><h4 class="title"><a id="d0e469"/>Click Install Drupal in English</h4></div></div></div></div><div class="sect3" title="Enter values"><div class="titlepage"><div><div><h4 class="title"><a id="d0e472"/>Enter values</h4></div></div></div><div class="sect4" title="Database name: drupal"><div class="titlepage"><div><div><h5 class="title"><a id="d0e475"/>Database name: drupal</h5></div></div></div></div><div class="sect4" title="Database username: drupalAdmin"><div class="titlepage"><div><div><h5 class="title"><a id="d0e478"/>Database username: drupalAdmin</h5></div></div></div></div><div class="sect4" title="Database password: apiary"><div class="titlepage"><div><div><h5 class="title"><a id="d0e481"/>Database password: apiary</h5></div></div></div></div></div><div class="sect3" title="Click Save and continue"><div class="titlepage"><div><div><h4 class="title"><a id="d0e484"/>Click Save and continue</h4></div></div></div></div><div class="sect3" title="Configure site"><div class="titlepage"><div><div><h4 class="title"><a id="d0e487"/>Configure site</h4></div></div></div><div class="sect4" title="Site information"><div class="titlepage"><div><div><h5 class="title"><a id="d0e490"/>Site information</h5></div></div></div><div class="sect5" title="Site name: hostname"><div class="titlepage"><div><div><h6 class="title"><a id="d0e493"/>Site name: hostname</h6></div></div></div></div><div class="sect5" title="Site e-mail address: apiary@hostname.org"><div class="titlepage"><div><div><h6 class="title"><a id="d0e496"/>Site e-mail address: apiary@hostname.org</h6></div></div></div></div></div><div class="sect4" title="Administrator Account"><div class="titlepage"><div><div><h5 class="title"><a id="d0e499"/>Administrator Account</h5></div></div></div><div class="sect5" title="Username: apiary"><div class="titlepage"><div><div><h6 class="title"><a id="d0e502"/>Username: apiary</h6></div></div></div></div><div class="sect5" title="E-mail address: apiary@hostname.org"><div class="titlepage"><div><div><h6 class="title"><a id="d0e505"/>E-mail address: apiary@hostname.org</h6></div></div></div></div><div class="sect5" title="Password: apiary"><div class="titlepage"><div><div><h6 class="title"><a id="d0e508"/>Password: apiary</h6></div></div></div></div></div><div class="sect4" title="Site e-mail address: apiary@hostname.org"><div class="titlepage"><div><div><h5 class="title"><a id="d0e511"/>Site e-mail address: apiary@hostname.org</h5></div></div></div></div><div class="sect4" title="Click Save and continue"><div class="titlepage"><div><div><h5 class="title"><a id="d0e514"/>Click Save and continue</h5></div></div></div></div></div></div><div class="sect2" title="Remove write permission on settings file"><div class="titlepage"><div><div><h3 class="title"><a id="d0e517"/>Remove write permission on settings file</h3></div></div></div><div class="cmdsynopsis"><p><code class="command">Chmod a-w /var/www/drupal/sites/default/settings.php </code> </p></div></div></div><div class="sect1" title="Setup Environment Variables"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="d0e523"/>Setup Environment Variables</h2></div></div></div><div class="sect2" title="Locate java home directory"><div class="titlepage"><div><div><h3 class="title"><a id="d0e526"/>Locate java home directory</h3></div></div></div><div class="cmdsynopsis"><p><code class="command">locate /rt.jar</code> </p></div></div><div class="sect2" title="Create symbolic link for java-homeNote: This preserves versioning"><div class="titlepage"><div><div><h3 class="title"><a id="d0e532"/>Create symbolic link for java-home<em><span class="remark">Note: This preserves
                        versioning</span></em></h3></div></div></div><div class="cmdsynopsis"><p><code class="command">ln -s /usr/lib/jvm/java-6-sun-1.6.0.15 /usr/lib/jvm/java-home</code> </p></div></div><div class="sect2" title="Edit user profile"><div class="titlepage"><div><div><h3 class="title"><a id="d0e540"/>Edit user profile</h3></div></div></div><div class="cmdsynopsis"><p><code class="command">vi /etc/profile<em><span class="remark">Add the following lines (Note: no spaces around
                            equal signs!)</span></em><em><span class="remark">export
                            FEDORA_HOME=/usr/local/fedora</span></em><em><span class="remark">export
                            JAVA_HOME=/usr/lib/jvm/java-home</span></em><em><span class="remark">export
                            PATH=$JAVA_HOME/bin:$PATH</span></em><em><span class="remark">export
                            PATH=$FEDORA_HOME/server/bin:$PATH</span></em><em><span class="remark">export
                            PATH=$FEDORA_HOME/client/bin:$PATH</span></em><em><span class="remark">export
                            CATALINA_HOME=$FEDORA_HOME/tomcat</span></em><em><span class="remark">export
                            LD_LIBRARY_PATH=/usr/lib/jvm/java-home</span></em><em><span class="remark">export
                            LD_LIBRARY_PATH=/usr/local/lib:$LD_LIBRARY_PATH</span></em></code> </p></div></div><div class="sect2" title="Restart machine"><div class="titlepage"><div><div><h3 class="title"><a id="d0e564"/>Restart machine</h3></div></div></div></div></div><div class="sect1" title="Install Fedora"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="d0e567"/>Install <a class="link" href="http://www.fedora-commons.org/" target="_top">Fedora</a></h2></div></div></div><div class="sect2" title="Download"><div class="titlepage"><div><div><h3 class="title"><a id="d0e572"/>Download</h3></div></div></div><div class="cmdsynopsis"><p><code class="command">wget
                        http://downloads.sourceforge.net/fedora-commons/fedora-installer-3.2.1.jar</code> </p></div></div><div class="sect2" title="Create symbolic link to fedora dirNote: This preserves versioning"><div class="titlepage"><div><div><h3 class="title"><a id="d0e578"/>Create symbolic link to fedora dir<em><span class="remark">Note: This preserves
                        versioning</span></em></h3></div></div></div><div class="cmdsynopsis"><p><code class="command">ln -s /usr/local/fedora-3.2 /usr/local/fedora</code> </p></div></div><div class="sect2" title="Create a keystore for SSL support"><div class="titlepage"><div><div><h3 class="title"><a id="d0e586"/>Create a keystore for SSL support</h3></div></div></div><div class="cmdsynopsis"><p><code class="command">$JAVA_HOME/bin/keytool -genkey -alias tomcat -keyalg
                            RSA<em><span class="remark">Password:apiary</span></em></code> </p></div></div><div class="sect2" title="Run Fedora java installer"><div class="titlepage"><div><div><h3 class="title"><a id="d0e594"/>Run Fedora java installer</h3></div></div></div><div class="cmdsynopsis"><p><code class="command">java -jar fedora- installer-3.2.1.jar</code> </p></div><div class="sect3" title="Installation type: custom"><div class="titlepage"><div><div><h4 class="title"><a id="d0e600"/>Installation type: custom</h4></div></div></div></div><div class="sect3" title="Fedora home directory: /usr/local/fedora-3.2"><div class="titlepage"><div><div><h4 class="title"><a id="d0e603"/>Fedora home directory: /usr/local/fedora-3.2</h4></div></div></div></div><div class="sect3" title="Fedora administrator password: apiary"><div class="titlepage"><div><div><h4 class="title"><a id="d0e606"/>Fedora administrator password: apiary</h4></div></div></div></div><div class="sect3" title="Fedora server host: hostname"><div class="titlepage"><div><div><h4 class="title"><a id="d0e609"/>Fedora server host: hostname</h4></div></div></div></div><div class="sect3" title="Fedora application server context: fedora"><div class="titlepage"><div><div><h4 class="title"><a id="d0e612"/>Fedora application server context: fedora</h4></div></div></div></div><div class="sect3" title="Authentication requirement for API-A: false"><div class="titlepage"><div><div><h4 class="title"><a id="d0e615"/>Authentication requirement for API-A: false</h4></div></div></div></div><div class="sect3" title="SSL availability: true"><div class="titlepage"><div><div><h4 class="title"><a id="d0e618"/>SSL availability: true</h4></div></div></div></div><div class="sect3" title="SSL required for API-A: false"><div class="titlepage"><div><div><h4 class="title"><a id="d0e621"/>SSL required for API-A: false</h4></div></div></div></div><div class="sect3" title="SSL required for API-M: false"><div class="titlepage"><div><div><h4 class="title"><a id="d0e624"/>SSL required for API-M: false</h4></div></div></div></div><div class="sect3" title="Servlet engine: included"><div class="titlepage"><div><div><h4 class="title"><a id="d0e627"/>Servlet engine: included</h4></div></div></div></div><div class="sect3" title="Tomcat home directory: /usr/local/fedora-3.2/tomcat"><div class="titlepage"><div><div><h4 class="title"><a id="d0e630"/>Tomcat home directory: /usr/local/fedora-3.2/tomcat</h4></div></div></div></div><div class="sect3" title="Tomcat HTTP port: 8080"><div class="titlepage"><div><div><h4 class="title"><a id="d0e633"/>Tomcat HTTP port: 8080</h4></div></div></div></div><div class="sect3" title="Tomcat shutdown port: 8005"><div class="titlepage"><div><div><h4 class="title"><a id="d0e636"/>Tomcat shutdown port: 8005</h4></div></div></div></div><div class="sect3" title="Tomcat Secure HTTP port: 8443"><div class="titlepage"><div><div><h4 class="title"><a id="d0e639"/>Tomcat Secure HTTP port: 8443</h4></div></div></div></div><div class="sect3" title="Keystore file: default"><div class="titlepage"><div><div><h4 class="title"><a id="d0e642"/>Keystore file: default</h4></div></div></div></div><div class="sect3" title="Keystore password: apiary"><div class="titlepage"><div><div><h4 class="title"><a id="d0e645"/>Keystore password: apiary</h4></div></div></div></div><div class="sect3" title="Keystore type: JKS"><div class="titlepage"><div><div><h4 class="title"><a id="d0e648"/>Keystore type: JKS</h4></div></div></div></div><div class="sect3" title="Database: mysql"><div class="titlepage"><div><div><h4 class="title"><a id="d0e651"/>Database: mysql</h4></div></div></div></div><div class="sect3" title="MySQL JDBC driver: included"><div class="titlepage"><div><div><h4 class="title"><a id="d0e654"/>MySQL JDBC driver: included</h4></div></div></div></div><div class="sect3" title="Database username: fedoraAdmin"><div class="titlepage"><div><div><h4 class="title"><a id="d0e657"/>Database username: fedoraAdmin</h4></div></div></div></div><div class="sect3" title="Database password: apiary"><div class="titlepage"><div><div><h4 class="title"><a id="d0e660"/>Database password: apiary</h4></div></div></div></div><div class="sect3" title="JDBC URL: jdbc:mysql://hostname/fedora?useUnicode=true&amp;amp;characterEncoding=UTF-8&amp;amp;autoReconnect=true"><div class="titlepage"><div><div><h4 class="title"><a id="d0e663"/>JDBC URL:
                        jdbc:mysql://hostname/fedora?useUnicode=true&amp;amp;characterEncoding=UTF-8&amp;amp;autoReconnect=true</h4></div></div></div></div><div class="sect3" title="JDBC DriverClass: com.mysql.jdbc.Driver"><div class="titlepage"><div><div><h4 class="title"><a id="d0e666"/>JDBC DriverClass: com.mysql.jdbc.Driver</h4></div></div></div></div><div class="sect3" title="Policy enforcement enabled: true"><div class="titlepage"><div><div><h4 class="title"><a id="d0e669"/>Policy enforcement enabled: true</h4></div></div></div></div><div class="sect3" title="Enable Resource Index: true"><div class="titlepage"><div><div><h4 class="title"><a id="d0e672"/>Enable Resource Index: true</h4></div></div></div></div><div class="sect3" title="Enable Messaging: false"><div class="titlepage"><div><div><h4 class="title"><a id="d0e675"/>Enable Messaging: false</h4></div></div></div></div><div class="sect3" title="Deploy local services and demos: true"><div class="titlepage"><div><div><h4 class="title"><a id="d0e678"/>Deploy local services and demos: true</h4></div></div></div></div></div><div class="sect2" title="Verify Fedora’s Resource Index activationNote: Some Ubuntu installs had this variable set to zero even using “Enable Resource Index: true”"><div class="titlepage"><div><div><h3 class="title"><a id="d0e681"/>Verify Fedora’s Resource Index activation<em><span class="remark">Note: Some Ubuntu installs
                        had this variable set to zero even using “Enable Resource Index:
                        true”</span></em></h3></div></div></div><div class="cmdsynopsis"><p><code class="command">vi $FEDORA_HOME/server/config/fedora.fcfg<em><span class="remark">Set
                            fedora.server.resourceIndex.ResourceIndex to 1</span></em></code> </p></div></div><div class="sect2" title="Startup Tomcat (which will install Tomcat Fedora features)"><div class="titlepage"><div><div><h3 class="title"><a id="d0e691"/>Startup Tomcat (which will install Tomcat Fedora features)</h3></div></div></div><div class="cmdsynopsis"><p><code class="command">$FEDORA_HOME/tomcat/bin/startup.sh</code> </p></div></div><div class="sect2" title="Shutdown Tomcat"><div class="titlepage"><div><div><h3 class="title"><a id="d0e697"/>Shutdown Tomcat</h3></div></div></div><div class="cmdsynopsis"><p><code class="command">$FEDORA_HOME/tomcat/bin/shutdown.sh</code> </p></div></div><div class="sect2" title="Copy crossdomain file"><div class="titlepage"><div><div><h3 class="title"><a id="d0e703"/>Copy crossdomain file</h3></div></div></div><div class="cmdsynopsis"><p><code class="command">cp $FEDORA_HOME/tomcat/webapps/fedora/admin/crossdomain.xml
                        /usr/local/fedora/tomcat/webapps</code> </p></div></div><div class="sect2" title="Setup anonymous user accessNote: Allows anonymous users to be able to view public objects later while using Islandora."><div class="titlepage"><div><div><h3 class="title"><a id="d0e709"/>Setup anonymous user access<em><span class="remark">Note: Allows anonymous users to be able to
                        view public objects later while using Islandora.</span></em></h3></div></div></div><div class="cmdsynopsis"><p><code class="command">vi $FEDORA_HOME/server/config/fedora-users.xml<em><span class="remark">Note: Islandora
                            will send the username of fedora_anonymous and password of anonymous for
                            all unauthenticated use.</span></em><em><span class="remark">Add the following &lt;user&gt;
                            lines</span></em><em><span class="remark">&lt;user name="fedora_anonymous"
                            password="anonymous"&gt; </span></em><em><span class="remark">    &lt;attribute
                            name="fedoraRole"&gt; </span></em><em><span class="remark">
                            &lt;value&gt;fedoraUser&lt;/value&gt; </span></em><em><span class="remark">    &lt;/attribute&gt;
                            </span></em><em><span class="remark">&lt;/user&gt; </span></em></code> </p></div></div><div class="sect2" title="Install Islandora Drupal filter"><div class="titlepage"><div><div><h3 class="title"><a id="d0e731"/>Install Islandora Drupal filter</h3></div></div></div><div class="sect3" title="Download DrupalFilter_3.jar from http://sourceforge.net/projects/islandora/files/"><div class="titlepage"><div><div><h4 class="title"><a id="d0e734"/>Download DrupalFilter_3.jar from
                        http://sourceforge.net/projects/islandora/files/ </h4></div></div></div><div class="cmdsynopsis"><p><code class="command">wget
                            http://softlayer.dl.sourceforge.net/project/islandora/islandora/Islandora_Dru6_Fed_3.1_beta2009-04-03/DrupalFilter_3.jar</code> </p></div></div><div class="sect3" title="Move Drupal filter to the fedora tomcat webapp"><div class="titlepage"><div><div><h4 class="title"><a id="d0e740"/>Move Drupal filter to the fedora tomcat webapp</h4></div></div></div><div class="cmdsynopsis"><p><code class="command">cp DrupalFilter_3.jar
                            $FEDORA_HOME/tomcat/webapps/fedora/WEB-INF/lib/DrupalFilter.jar</code> </p></div></div><div class="sect3" title="Create a fedora server filter-drupal file"><div class="titlepage"><div><div><h4 class="title"><a id="d0e746"/>Create a fedora server filter-drupal file</h4></div></div></div><div class="cmdsynopsis"><p><code class="command">vi $FEDORA_HOME/server/config/filter-drupal.xml<em><span class="remark">Warning: The
                                xml file needs a blank line at the end</span></em><em><span class="remark">Add the
                                following lines</span></em><span>&lt;?xml version="1.0"
                                encoding="UTF-8"?&gt; &lt;!--File to hold drupal connection info for
                                the FilterDrupal servlet filter. For multisite drupal installs you
                                can include multiple connection elements. We will query all the
                                databases and assume any user in any drupal db with the same
                                username and password are the same user. We will gather all roles
                                for that user from all databases. This is a potential security risk
                                if a user in one drupal db has the same username and password as
                                another user in a seperate drupaldb. We are also assuming all drupal
                                dbs to be mysql. This file should be located in the same directory
                                as the fedora.cfcg file--&gt;&lt;FilterDrupal_Connection&gt;
                                &lt;connection server="hostname" dbname="drupal" user="drupalAdmin"
                                password="apiary" port="3306"&gt; &lt;sql&gt; SELECT distinct u.uid as
                                userid, u.name as Name, u.pass as Pass, r.name as role FROM
                                drupal.users u, drupal.role r, drupal.users_roles where u.name=? and
                                u.pass=? and r.rid=drupal.users_roles.rid and
                                u.uid=drupal.users_roles.uid; &lt;/sql&gt; &lt;/connection&gt;
                                &lt;/FilterDrupal_Connection&gt;</span></code> </p></div></div><div class="sect3" title="Edit the fedora tomcat webapp web.xml file"><div class="titlepage"><div><div><h4 class="title"><a id="d0e758"/>Edit the fedora tomcat webapp web.xml file</h4></div></div></div><div class="cmdsynopsis"><p><code class="command">vi
                                    $FEDORA_HOME/tomcat/webapps/fedora/WEB-INF/web.xml<em><span class="remark">After<em><span class="remark">&lt;filter&gt;
                                    </span></em><em><span class="remark">
                                    &lt;filter-name&gt;XmlUserfileFilter&lt;/filter-name&gt;
                                    </span></em><em><span class="remark">
                                    &lt;filter-class&gt;fedora.server.security.servletfilters.xmluserfile.FilterXmlUserfile&lt;/filter-class&gt;
                                    </span></em><em><span class="remark">&lt;/filter&gt;</span></em></span></em><em><span class="remark">Add<em><span class="remark">&lt;filter&gt;
                                    </span></em><em><span class="remark">
                                    &lt;filter-name&gt;DrupalFilter&lt;/filter-name&gt;</span></em><em><span class="remark">
                                    &lt;filter-class&gt;ca.upei.roblib.fedora.servletfilter.FilterDrupal&lt;/filter-class&gt;</span></em><em><span class="remark">&lt;/filter&gt;</span></em></span></em><em><span class="remark">After<em><span class="remark">&lt;filter-mapping&gt;</span></em><em><span class="remark">
                                    &lt;filter-name&gt;XmlUserfileFilter&lt;/filter-name&gt;</span></em><em><span class="remark">
                                    &lt;url-pattern&gt;/*&lt;/url-pattern&gt;</span></em><em><span class="remark">&lt;/filter-mapping&gt;</span></em></span></em><em><span class="remark">Add<em><span class="remark">&lt;filter-mapping&gt;</span></em><em><span class="remark">
                                    &lt;filter-name&gt;DrupalFilter&lt;/filter-name&gt;</span></em><em><span class="remark">
                                    &lt;url-pattern&gt;/*&lt;/url-pattern&gt;</span></em><em><span class="remark">&lt;/filter-mapping&gt;
                                </span></em></span></em></code> </p></div></div></div><div class="sect2" title="Enable and rebuild Fedora’s Resource Index"><div class="titlepage"><div><div><h3 class="title"><a id="d0e804"/>Enable and rebuild Fedora’s Resource Index</h3></div></div></div><div class="sect3" title="Enable Fedora’s Resource Index activationNote: Some Ubuntu installs had this variable set to zero even using “Enable Resource Index: true”"><div class="titlepage"><div><div><h4 class="title"><a id="d0e807"/>Enable Fedora’s Resource Index activation<em><span class="remark">Note: Some Ubuntu
                            installs had this variable set to zero even using “Enable Resource
                            Index: true”</span></em></h4></div></div></div><div class="cmdsynopsis"><p><code class="command">vi $FEDORA_HOME/server/config/fedora.fcfg<em><span class="remark">Set
                                fedora.server.resourceIndex.ResourceIndex to 1</span></em></code> </p></div></div><div class="sect3" title="Rebuild Fedora’s Resource Index activation"><div class="titlepage"><div><div><h4 class="title"><a id="d0e817"/>Rebuild Fedora’s Resource Index activation</h4></div></div></div><div class="cmdsynopsis"><p><code class="command">$FEDORA_HOME/server/bin/fedora-rebuild.sh<em><span class="remark">Choose “Rebuild
                                the Resource Index” </span></em><em><span class="remark">Verify
                            selection</span></em></code> </p></div></div><div class="sect3" title="Restart Fedora"><div class="titlepage"><div><div><h4 class="title"><a id="d0e827"/>Restart Fedora</h4></div></div></div><div class="cmdsynopsis"><p><code class="command">$FEDORA_HOME/tomcat/bin/shutdown.sh</code> </p></div><div class="cmdsynopsis"><p><code class="command">$FEDORA_HOME/tomcat/bin/startup.sh</code> </p></div></div></div></div><div class="sect1" title="Install Adore-Djatoka Image Server"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="d0e836"/>Install <a class="link" href="http://sourceforge.net/projects/djatoka/" target="_top">Adore-Djatoka
                    Image Server</a></h2></div></div></div><div class="sect2" title="Download"><div class="titlepage"><div><div><h3 class="title"><a id="d0e841"/>Download</h3></div></div></div><div class="cmdsynopsis"><p><code class="command">wget
                        http://iweb.dl.sourceforge.net/project/djatoka/djatoka/1.1/adore-djatoka-1.1.tar.gz</code> </p></div></div><div class="sect2" title="Extract adore-djatoka-1.1"><div class="titlepage"><div><div><h3 class="title"><a id="d0e847"/>Extract adore-djatoka-1.1</h3></div></div></div><div class="cmdsynopsis"><p><code class="command">tar -zxvf adore-djatoka-1.1.tar.gz</code> </p></div></div><div class="sect2" title="Move adore-djatoka-1.1 to /usr/local"><div class="titlepage"><div><div><h3 class="title"><a id="d0e853"/>Move adore-djatoka-1.1 to /usr/local</h3></div></div></div><div class="cmdsynopsis"><p><code class="command">mv adore-djatoka-x.x /usr/local</code> </p></div></div><div class="sect2" title="Create symbolic link to adore-djatoka dirNote: This preserves versioning"><div class="titlepage"><div><div><h3 class="title"><a id="d0e859"/>Create symbolic link to adore-djatoka dir<em><span class="remark">Note: This preserves
                        versioning</span></em></h3></div></div></div><div class="cmdsynopsis"><p><code class="command">ln -s /usr/local/adore-djatoka-1.1 /usr/local/adore-djatoka</code> </p></div></div><div class="sect2" title="Test functionality"><div class="titlepage"><div><div><h3 class="title"><a id="d0e867"/>Test functionality</h3></div></div></div><div class="cmdsynopsis"><p><code class="command">cd /usr/local/adore-djatoka/bin</code> </p></div><div class="cmdsynopsis"><p><code class="command">./compress.sh -i ../etc/test.jpg -o ../etc/test.jp2<em><span class="remark">Compress jpg
                            file into jpeg2000 format</span></em></code> </p></div><div class="cmdsynopsis"><p><code class="command">./extract.sh -i ../etc/test.jp2 -o ../etc/test-size1.jpg -l 1
                            <em><span class="remark">extracts a jpg file from a jpeg2000 file</span></em></code> </p></div><div class="cmdsynopsis"><p><code class="command">ls -l ../etc <em><span class="remark">verify test.jp2 and test-size1.jpg files were
                            created</span></em></code> </p></div></div><div class="sect2" title="Add Adore-Djatoka to tomcat webapps"><div class="titlepage"><div><div><h3 class="title"><a id="d0e888"/>Add Adore-Djatoka to tomcat webapps</h3></div></div></div><div class="sect3" title="Shutdown running tomcat"><div class="titlepage"><div><div><h4 class="title"><a id="d0e891"/>Shutdown running tomcat</h4></div></div></div><div class="cmdsynopsis"><p><code class="command">$FEDORA_HOME/tomcat/bin/startup.sh</code> </p></div></div><div class="sect3" title="Copy adore-djatoka.war file to tomcat webapps"><div class="titlepage"><div><div><h4 class="title"><a id="d0e897"/>Copy adore-djatoka.war file to tomcat webapps</h4></div></div></div><div class="cmdsynopsis"><p><code class="command">cp /usr/local/adore-djatoka/dist/adore-djatoka.war
                            /$CATALINA_HOME/webapps</code> </p></div></div><div class="sect3" title="Start tomcat from Adore-Djatoka bin directoryNote: Must be started while currently in the /usr/local/adore-djatoka/bin directory"><div class="titlepage"><div><div><h4 class="title"><a id="d0e903"/>Start tomcat from Adore-Djatoka bin directory<em><span class="remark">Note: Must be
                            started while currently in the /usr/local/adore-djatoka/bin
                            directory</span></em></h4></div></div></div><div class="cmdsynopsis"><p><code class="command">cd /usr/local/adore-djatoka/bin</code> </p></div><div class="cmdsynopsis"><p><code class="command">./tomcat.sh start</code> </p></div></div></div><div class="sect2" title="Configure Referent Resolver"><div class="titlepage"><div><div><h3 class="title"><a id="d0e914"/>Configure Referent Resolver</h3></div></div></div><div class="sect3" title="Edit Djatoka Properties"><div class="titlepage"><div><div><h4 class="title"><a id="d0e917"/>Edit Djatoka Properties</h4></div></div></div><div class="cmdsynopsis"><p><code class="command">vi
                                $CATALINA_HOME/webapps/adore-djatoka/WEB-INF/classes/djatoka.properties<em><span class="remark">Add
                                the following in the Referent Resolver Properties
                                section</span></em><em><span class="remark">SimpleListResolver.maxRemoteCacheSize=10000</span></em></code> </p></div></div><div class="sect3" title="Setup JP2 images"><div class="titlepage"><div><div><h4 class="title"><a id="d0e927"/>Setup JP2 images</h4></div></div></div><div class="sect4" title="Create Image directory"><div class="titlepage"><div><div><h5 class="title"><a id="d0e930"/>Create Image directory</h5></div></div></div><div class="cmdsynopsis"><p><code class="command">mkdir -p /var/www/images/jpeg2000</code> </p></div></div><div class="sect4" title="Download JP2 images"><div class="titlepage"><div><div><h5 class="title"><a id="d0e936"/>Download JP2 images</h5></div></div></div><div class="cmdsynopsis"><p><code class="command">cd /var/www/images/jpeg2000</code> </p></div><div class="cmdsynopsis"><p><code class="command">wget
                                http://research.apiaryproject.org/images/apiary-aquarius-jpeg2000-vbox.tar.gz</code> </p></div></div><div class="sect4" title="Extract images"><div class="titlepage"><div><div><h5 class="title"><a id="d0e945"/>Extract images</h5></div></div></div><div class="cmdsynopsis"><p><code class="command">tar –zxvf apiary-aquarius-jpeg2000-vbox.tar.gz</code> </p></div></div><div class="sect4" title="Edit simple resolver list location"><div class="titlepage"><div><div><h5 class="title"><a id="d0e951"/>Edit simple resolver list location</h5></div></div></div><div class="cmdsynopsis"><p><code class="command">vi /var/www/images/jpeg2000/imgIndex.txt<em><span class="remark">Replace all
                                    /mnt/converted_images with /var/www/images</span></em></code> </p></div></div><div class="sect4" title="Move list to appropriate location"><div class="titlepage"><div><div><h5 class="title"><a id="d0e959"/>Move list to appropriate location</h5></div></div></div><div class="cmdsynopsis"><p><code class="command">mv /var/www/images/jpeg2000/imgIndex.txt
                                $CATALINA_HOME/webapps/adore-djatoka/WEB-INF/classes</code> </p></div></div><div class="sect4" title="Stop and Start Tomcat from adore-djatoka bin directory"><div class="titlepage"><div><div><h5 class="title"><a id="d0e965"/>Stop and Start Tomcat from adore-djatoka bin directory</h5></div></div></div><div class="cmdsynopsis"><p><code class="command">cd /usr/local/adore-djatoka/bin</code> </p></div><div class="cmdsynopsis"><p><code class="command">./tomcat.sh stop</code> </p></div><div class="cmdsynopsis"><p><code class="command">./tomcat.sh start</code> </p></div></div></div></div></div><div class="sect1" title="Install OCRopus"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="d0e977"/>Install <a class="link" href="http://code.google.com/p/ocropus/" target="_top">OCRopus</a></h2></div></div></div><div class="sect2" title="Download"><div class="titlepage"><div><div><h3 class="title"><a id="d0e982"/>Download</h3></div></div></div><div class="cmdsynopsis"><p><code class="command">mkdir /home/apiary/ocropus</code> </p></div><div class="cmdsynopsis"><p><code class="command">cd /home/apiary/ocropus</code> </p></div><div class="cmdsynopsis"><p><code class="command">hg clone http://iulib.googlecode.com/hg iulib</code> </p></div><div class="cmdsynopsis"><p><code class="command">hg clone http://ocropus.googlecode.com/hg ocropus</code> </p></div></div><div class="sect2" title="Install prerequisites"><div class="titlepage"><div><div><h3 class="title"><a id="d0e997"/>Install prerequisites</h3></div></div></div><div class="cmdsynopsis"><p><code class="command">sh -x ocropus/ubuntu-packages</code> </p></div></div><div class="sect2" title="Install iulib library"><div class="titlepage"><div><div><h3 class="title"><a id="d0e1003"/>Install iulib library</h3></div></div></div><div class="cmdsynopsis"><p><code class="command">cd /home/apiary/ocropus/iulib</code> </p></div><div class="cmdsynopsis"><p><code class="command">scons</code> </p></div><div class="cmdsynopsis"><p><code class="command">scons install</code> </p></div></div><div class="sect2" title="Install OCRopus library"><div class="titlepage"><div><div><h3 class="title"><a id="d0e1015"/>Install OCRopus library</h3></div></div></div><div class="cmdsynopsis"><p><code class="command">cd /home/apiary/ocropus/ocropus</code> </p></div><div class="cmdsynopsis"><p><code class="command">scons</code> </p></div><div class="cmdsynopsis"><p><code class="command">scons install</code> </p></div></div><div class="sect2" title="Configure Ubuntu for OCRopus"><div class="titlepage"><div><div><h3 class="title"><a id="d0e1027"/>Configure Ubuntu for OCRopus</h3></div></div></div><div class="sect3" title="Add /usr/local/bin to PATH"><div class="titlepage"><div><div><h4 class="title"><a id="d0e1030"/>Add /usr/local/bin to PATH</h4></div></div></div><div class="cmdsynopsis"><p><code class="command">PATH=/usr/local/bin:$PATH</code> </p></div></div><div class="sect3" title="Add library reference"><div class="titlepage"><div><div><h4 class="title"><a id="d0e1036"/>Add library reference</h4></div></div></div><div class="cmdsynopsis"><p><code class="command">ldconfig</code> </p></div><div class="cmdsynopsis"><p><code class="command">LD_LIBRARY_PATH=/usr/local/lib:$LD_LIBRARY_PATH</code> </p></div></div></div><div class="sect2" title="Test install"><div class="titlepage"><div><div><h3 class="title"><a id="d0e1045"/>Test install</h3></div></div></div><div class="cmdsynopsis"><p><code class="command">ocropus page data/testimages/simple.png<em><span class="remark">Note: should output the
                            ocr of image simple.png</span></em></code> </p></div></div></div><div class="sect1" title="Install Ocrad"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="d0e1053"/>Install <a class="link" href="http://www.gnu.org/software/ocrad/" target="_top">Ocrad</a></h2></div></div></div><div class="sect2" title="Download"><div class="titlepage"><div><div><h3 class="title"><a id="d0e1058"/>Download</h3></div></div></div><div class="cmdsynopsis"><p><code class="command">mkdir /home/apiary/ocrad</code> </p></div><div class="cmdsynopsis"><p><code class="command">cd /home/apiary/ocrad</code> </p></div><div class="cmdsynopsis"><p><code class="command">wget http://ftp.gnu.org/gnu/ocrad/ocrad-0.21.tar.gz</code> </p></div></div><div class="sect2" title="Extract ocrad-0.21"><div class="titlepage"><div><div><h3 class="title"><a id="d0e1070"/>Extract ocrad-0.21</h3></div></div></div><div class="cmdsynopsis"><p><code class="command">tar -zxvf ocrad-0.21.tar.gz</code> </p></div></div><div class="sect2" title="Configure and make ocrad"><div class="titlepage"><div><div><h3 class="title"><a id="d0e1076"/>Configure and make ocrad</h3></div></div></div><div class="cmdsynopsis"><p><code class="command">cd /home/apiary/ocrad/ocrad-0.21</code> </p></div><div class="cmdsynopsis"><p><code class="command">./configure</code> </p></div><div class="cmdsynopsis"><p><code class="command">make</code> </p></div><div class="cmdsynopsis"><p><code class="command">make install<em><span class="remark">Note: adds ocrad file to
                        /usr/local/bin</span></em></code> </p></div></div></div><div class="sect1" title="Install GOCR"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="d0e1093"/>Install <a class="link" href="http://jocr.sourceforge.net/" target="_top">GOCR</a></h2></div></div></div><div class="sect2" title="Download"><div class="titlepage"><div><div><h3 class="title"><a id="d0e1098"/>Download</h3></div></div></div><div class="cmdsynopsis"><p><code class="command">mkdir /home/apiary/gocr</code> </p></div><div class="cmdsynopsis"><p><code class="command">cd /home/apiary/gocr</code> </p></div><div class="cmdsynopsis"><p><code class="command">wget
                        http://www-e.uni-magdeburg.de/jschulen/ocr/gocr-0.49.tar.gz</code> </p></div></div><div class="sect2" title="Extract ocrad-0.21"><div class="titlepage"><div><div><h3 class="title"><a id="d0e1110"/>Extract ocrad-0.21</h3></div></div></div><div class="cmdsynopsis"><p><code class="command">tar -zxvf gocr-0.49.tar.gz</code> </p></div></div><div class="sect2" title="Configure and make ocrad"><div class="titlepage"><div><div><h3 class="title"><a id="d0e1116"/>Configure and make ocrad</h3></div></div></div><div class="cmdsynopsis"><p><code class="command">cd /home/apiary/gocr/gocr-0.49</code> </p></div><div class="cmdsynopsis"><p><code class="command">./configure</code> </p></div><div class="cmdsynopsis"><p><code class="command">make</code> </p></div><div class="cmdsynopsis"><p><code class="command">make install<em><span class="remark">Note: adds gocr file to
                        /usr/local/bin</span></em></code> </p></div></div></div></div></div></body></html>