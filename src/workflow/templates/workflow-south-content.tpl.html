    <div id="popupleft" title="Queue Widget - Select Previous Item">
    <div id="popupleft-main">
    <div class="t"><div class="b"><div class="l"><div class="r"><div class="bl"><div class="br"><div class="tl"><div class="tr">
        <div id="prev_specimen_image"><img src="assets/img/specimen_prev.jpg"/></div>
    </div></div></div></div></div></div></div></div>
    </div><!-- #popupleft-main -->
    <div id="popupleft_panhandle" onclick="make_prev_specimen_current();" onmouseout="hide_popupall();">
    <a href="#" onclick="hide_popupall();">
    <img src="assets/img/popupleft_bl.png"/>
    </a>
    </div><!-- #popupleft_panhandle -->
    </div><!-- #popupleft -->

    <div id="popupright" title="Queue Widget - Select Next Item">
    <div id="popupright-main">
    <div class="t"><div class="b"><div class="l"><div class="r"><div class="bl"><div class="br"><div class="tl"><div class="tr">
        <div id="next_specimen_image"><img src="assets/img/specimen_next.jpg"/></div>
    </div></div></div></div></div></div></div></div>
    </div><!-- #popupright-main -->
    <div id="popupright_panhandle" onclick="make_next_specimen_current();" onmouseout="hide_popupall();">
    <a href="#" onclick="hide_popupall();">
    <img src="assets/img/popupright_br.png"/>
    </a>
    </div><!-- #popupright_panhandle -->
    </div><!-- #popupright -->

    <div id="popupcenter" title="ROI Selector">
    <div id="popupcenter-main">
    <div class="t"><div class="b"><div class="l"><div class="r"><div class="bl"><div class="br"><div class="tl"><div class="tr">
    <div id="popupcenter-content-top"></div>
    <div id="popupcenter-content">
        <div class="roi_item" id="roi_item_001" style="background:#ddd;">
            <img src="assets/img/roi1.jpg" height=30px onclick="activate_roi(1);" /> ROI 001
        </div>
        <div class="roi_item" id="roi_item_002" style="background:#ddd;">
            <img src="assets/img/roi2.jpg" height=30px onclick="activate_roi(2);" /> ROI 002
        </div>
        <div class="roi_item" id="roi_item_003" style="background:#ddd;">
            <img src="assets/img/roi3.jpg" height=30px onclick="activate_roi(3);" /> ROI 003
        </div>
        <div class="roi_item hide" id="roi_item_004" style="background:#ddd;">
            <img src="assets/img/roi4.jpg" height=30px onclick="activate_roi(4);" /> ROI 004
        </div>
        <div class="roi_item hide" id="roi_item_005" style="background:#ddd;">
            <img src="assets/img/roi5.jpg" height=30px onclick="activate_roi(5);" /> ROI 005
        </div>
    </div><!-- #popupcenter-content -->
    <div id="popupcenter-content-bottom"></div>
    <div id="popup-center-controls">
        <div class="floatleft"><img src="assets/img/icon_up.png" onclick="roi_scroll_up();" /></div>
        <div class="floatright"><img src="assets/img/icon_down.png" onclick="roi_scroll_down();" /></div>
    </div>
    <div class="clearfix"></div>
    </div></div></div></div></div></div></div></div>
    </div><!-- #popupright-main -->
    </div><!-- #popupcenter -->

    <div class="floatleft">
    <div id="prev_placeholder" class="floatleft">
        <img src="assets/img/placeholder.png"/>
    </div>
    <div id="prev_arrow" class="floatleft">
        <a href="#" onmouseover="hide_popupall(); show_popupleft(this);" >
        <img src="assets/img/PrevArrow.png"/>
        </a>
    </div>
    <div id="current_specimen" class="floatleft" onmouseover="hide_popupall(); show_popupcenter(this);" title="<img src='assets/img/honey20px.png'/> Queue Widget">
        <a href="#" onmouseover="hide_popupall(); show_popupcenter(this);" >
        <img src="assets/img/specimen_current.jpg" />
        </a>
    </div>
    <div id="next_arrow" class="floatleft">
        <a href="#"  onmouseover="hide_popupall(); show_popupright(this);" >
            <img src="assets/img/NextArrow.png"/>
        </a>
    </div>
    <div id="next_add" class="floatleft">
        <a href="#"  onclick="add_to_queue();" >
            <img src="assets/img/NextAdd.png"/>
        </a>
    </div>
   	<!--a href="#" onmouseover="myLayout.allowOverflow(this);$('#popupleft').show();" onmouseout="myLayout.resetOverflow('south');$('#popupleft').hide();"><p>This is a test for the transparent png popup test...</p></a-->
    </div>
    <div class="_clearfix"></div>

    <div class="roundedcornr_ltgray_title" id="queue-info" title="<img src='assets/img/honey20px.png'/> My Queue Summary">
    <div class="roundedcornr_ltgray_title_help floatright" onclick="open_popup('help_myqueue.html');">&nbsp;</div>
    <div class="t"><div class="b"><div class="l"><div class="r"><div class="bl"><div class="br"><div class="tl"><div class="tr">
        <div id="queue_info_content">
            <div id="queue-info-add-items-control" class="add_items_link"></div>
            <h3>My Queue Summary</h3>
            <div><span id="queue-info-specimen-count">0</span> specimens</div>
            <div><span id="queue-info-roi-count">0</span> ROIs</div>
            <div id="queue-info-control" ><span id="pin_icon">&nbsp;&nbsp;&nbsp;&nbsp;</span> <span id="queue-info-control-text">show queue</span></div>
        </div>
    </div></div></div></div></div></div></div></div>
    </div><!-- .roundedcornr_ltgray -->

    <div class="roundedcornr_ltgray_title" id="object_detail" title="Current item detail">
    <div class="roundedcornr_ltgray_title_help floatright" onclick="open_popup('help_current_item.html');">&nbsp;</div>
    <div class="t"><div class="b"><div class="l"><div class="r"><div class="bl"><div class="br"><div class="tl"><div class="tr">
        <div id="object_detail_content">
            <h3><span id="current_specimen_name">No specimen currently selected</span><span id="current_specimen_stage_hyphen"> - </span><span id="current_specimen_stage"></span></h3>
            <span id="current_roi_name"></span><span id="current_roi_stage_hyphen"> - </span><span id="current_roi_stage"></span>
            <!--div class="clearfix"></div-->
            <!--div id="object_type">[object type]</div><div id="object_separator">&nbsp;-&nbsp;</div><div id="object_name">[object name]</div-->
            <div class="clearfix"></div>
            <div id="specimen_status_dropdown">
            <label for="specimen_status_dropdown">Status:</label>
            <select id="object_status" name="_specimen_status_dropdown" onchange="change_status();">
            <option>select a status</option>
            <option>not started</option>
            <option>in progress</option>
            <option>incomplete</option>
            <option>completed</option>
            <option>in QC</option>
            <option>passed QC</option>
            <option>problem</option>
            </select>
            </div><!-- #specimen_status_dropdown -->
            <a id="add_note_link" href="#" >Add note</a>
        </div><!-- #object_detail_content -->
    </div></div></div></div></div></div></div></div>
    </div><!-- .roundedcornr_ltgray -->

    <div class="roundedcornr_ltgray_title" id="roi_legend" title="ROI Legend">
    <div class="roundedcornr_ltgray_title_help floatright" onclick="open_popup('help_roi_legend.html');">&nbsp;</div>
    <div class="t"><div class="b"><div class="l"><div class="r"><div class="bl"><div class="br"><div class="tl"><div class="tr">
        <div id="roi_legend_content">
            <h3>ROI Legend</h3>
            <div class="roi_legend_label"><span class="roi_legend_color border_red"></span>Primary Label</div>
            <div class="roi_legend_label"><span class="roi_legend_color border_blue"></span>Annotation/Other</div>
            <div class="roi_legend_label"><span class="roi_legend_color border_green"></span>Barcode</div>
            <div class="roi_legend_label"><span class="roi_legend_color border_orange"></span>Undefined</div>
        </div><!-- #roi_legend_content -->
    </div></div></div></div></div></div></div></div>
    </div><!-- .roundedcornr_ltgray -->

    <div id="session_buttons" title="<img src='assets/img/honey20px.png'/> Session tools">
        <button id="session_statistics_link" value="session_statistics_link" class="customBtn" ><span>Session Statistics</span></button>
        <button id="end_session_link" value="end_session_link" class="customBtn" ><span>End Apiary Session</span></button>
    </div><!-- #session_buttons -->

{if $smarty.get.debug != ''}
    <div id="debug_links" style="font-size:11px;">
        <a href="#" onclick="populate_parse_form();">set parse form</a><br/>
        <a href="#" onclick="set_treeview();">treeview</a><br/>
        <a href="#" onclick="$('#parse_tab_text_content').load('debug.php?section=parse_text2');">set parse text2</a><br/>
        <a href="#" onclick="$('#parse_tab_text_content').load('debug.php?section=parse_text3');">set parse text3</a><br/>
        <a href="#" onclick="update_parse_spans();">update parse spans</a><br/>

        <a href="#" onclick="populate_my_queue();">fill my queue</a><br/>
        <a href="#" onclick="populate_roi_list();">fill roi list</a><br/>
        <a href="#" onclick="populate_smallmap();">fill smallmap</a><br/>
        <a href="#" onclick="get_largest_span_id();">get_largest_span_id</a><br/>
        <a href="#" onclick="show_item_browser();">show item browser</a><br/>
        <!--a href="#" onclick="fetch_roi_content();">fetch roi data</a><br/>
        
        <a href="#" onclick="alert($('#queue_list > div.widget-header').length);">widget count</a><br/>
        <a href="#" onclick="adjust_parse_status();">set parse status</a><br/>
        <a href="#" onclick="adjust_transcribe_status();">set transcribe status</a><br/-->
    </div><!-- #debug_links -->
{/if}
{literal}
<script type="text/javascript">

    var delay_reinit;
    function populate_parse_form()
    {
        $('#parse-control-content').empty();
        $('#parse-control-content').load('debug.php?section=parse_content_0');
        delay_reinit = setInterval(set_treeview,100);
    }

    function set_treeview()
    {
        $('#parse-treeview').treeview();
        clearInterval(delay_reinit);
    }

    function populate_my_queue()
    {
        $('#queue_list').load('debug.php?section=my_queue');
    }

    function populate_roi_list()
    {
        $('#step1_east_section').load('debug.php?section=roi_list');
    }

    function populate_smallmap()
    {
        $('#map').load('debug.php?section=smallmap');
    }

    function fetch_roi_content()
    {
        $('#step1_east_section').load('http://dev.apiaryproject.org/drupal/apiary/ajaxrequest/getImageROIList/ap-image:Image-37/0');
    }

    function adjust_transcribe_status()
    {
        var status = $('#object_status').val();
        set_selected_roi_transcribe_status(status);
    }

    function adjust_parse_status()
    {
        var status = $('#object_status').val();
        set_selected_roi_parse_status(status);
    }

    function show_item_browser()
    {
        $("#item_browser").load('debug.php?section=item_browser', function(results){
            $.colorbox({inline:true, href:"#item_browser"});
        });
    }

    function update_parse_spans()
    {
        var input_fields = Array('recordedBy','recordNumber','additionalRecordNumbers','verbatimEventDate','identifiedBy','eventRemarks','verbatimDateIdentified','verbatimDateAnnotated','annotatedBy','vernacularName','taxonRemarks','datasetName','otherCatalogNumbers','catalogNumber','collectionCode','previousOwners','occurrenceRemarks','identificationRemarks','verbatimScientificName','verbatimHigherClassification','annotationRemarks','verbatimLocality','verbatimElevation','verbatimCoordinates');
        for ( var i = 0; i < input_fields.length; ++i )
        {
            idval = input_fields[i];
            if ( $('#'+idval).html() != '' )
            {

                current_text_selection = $('#'+idval).html()+'';
                $('#tag_'+idval).replaceWith('');
                //$('#'+idval).replaceWith(current_text_selection);
                current_text_selection = current_text_selection.replace(/^\s+|\s+$/g, '') ;
                if ( current_text_selection != null && current_text_selection != '' )
                {
                    set_parse_type(idval);
                    //$('.selected_section').addClass('unconfirmed');
                    $('#tag_container').html($('#tag_container').html()+'<div id="tag_'+idval+'" style="position:absolute;z-index:10;"><img src="assets/img/unconfirmed.png" onclick="confirm_tag(\''+idval+'\')"/></div>');
                    var position = $('.selected_section').offset(); // position = { left: 42, top: 567 }
                    if ( position != null )
                    {
                        position.left -= 20;
                        position.top -= 30;
                        $('#tag_'+idval).css(position);
                    }
                    $('.selected_section').removeClass('selected_section');
                    selected_class = '';
                }
            }
        }
    }

    function confirm_tag(idval)
    {
        //alert(idval);
        $('#tag_'+idval).replaceWith('');
    }

</script>
{/literal}


